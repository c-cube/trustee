; basic factorial, using env-based recursion (!)

; function definition
(meta "fact" {
  (rstore 0)
  1 (rload 0) lt ; n > 1
  (jif :l1)
    1 ret
  :l1
    (rload 0) sub1
      (tforce "fact") call ; fact (n-1)
    (rload 0) mult ; *n
})

(eval 5 (tforce "fact") call show)

; constant definition
(meta "fact5" 5 (tforce "fact") call)
(eval (tforce "fact5") show)
